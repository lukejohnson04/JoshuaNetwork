{% load templatetags %}
<article class="media content-section infinite-item" style="position:relative;">
	<div class="post-left-bar">
		<img class="rounded-circle post-img" style=" margin:auto" src="{{ post.author.profile.image.url }}">
		<div style="padding-top: 0em; text-align: center; transform: scale(0.75)" class="like-div">
        	<a class="btn-upjoshua" href="javascript:void(0)" onclick="likePost(this, 1)" data-pk="{{ post.pk }}" data-likes="{{ post.total_likes }}">
            {% if karma == 1 %}
				<img src="/media/ui/upjoshua.png" name="upjoshua" style="display:block; margin: auto">
			{% else %}
				<img src="/media/ui/upjoshua_empty.png" name="upjoshua" style="display:block; margin: auto">				
			{% endif %}
			</a>
            <strong id="likeCount">{{ post.total_likes }}</strong>
        	<a class="btn-downjoshua" href="javascript:void(0)" onclick="likePost(this, -1)" data-pk="{{ post.pk }}" data-likes="{{ post.total_likes }}">
            {% if karma == -1 %}
				<img src="/media/ui/downjoshua.png" name="downjoshua" style="display:block; margin: auto">
			{% else %}
				<img src="/media/ui/downjoshua_empty.png" name="downjoshua" style="display:block; margin: auto">				
			{% endif %}
			</a>
		</div>
	</div>
	<div class="media-body post-body">
		<div class="article-metadata">
			<a href="{% url 'user-posts' post.author.username %}">{{ post.author }}</a>
	 		<p class="text-muted">{{ post.date_posted | timesince | upto:','}} ago</p>
	    </div>
		<h2 class="post-title"><a class="article-title" href="{% url 'post-detail' post.id %}">{{ post.title }}</a></h2>
		<p class="article-content">{{ post.content }}</p>
		{% if post.image %}
			<img style="max-width: 100%; min-width: 60%; height: auto" src="{{ post.image.url }}">
			<br><br>
		{% endif %}
	</div>
	<div class="post-bottom-bar">
		{% if post.author == user %}
			<a class="link-danger" href="{% url 'post-delete' post.id %}">Delete&nbsp;</a>
		{% endif %}
		<a href="{% url 'post-detail' post.id %}" class="text-muted">Comments
			{% if post.comments.count > 0 %}
				 ({{ post.comments.count }})
			{% endif %}
		</a>
	</div>
</article>
